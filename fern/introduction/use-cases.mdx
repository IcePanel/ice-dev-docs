## Export objects and relationships

The object and relationship data that IcePanel stores as part of the model has great uses. For example informing an incident response team about up and downstream dependencies of a service as well as which team owns the service.

Export objects and connections in CSV format which is great for importing to spreadsheets.

```
curl https://api.icepanel.io/v1/landscapes/{landscapeId}/versions/latest/model/objects/export/csv

curl https://api.icepanel.io/v1/landscapes/{landscapeId}/versions/latest/model/connections/export/csv
```

Export the whole model as JSON which can be easily used as part of a build pipeline, script or automation. This also includes flows which the CSV export does not.

```
curl https://api.icepanel.io/v1/landscapes/{landscapeId}/versions/latest/export/json
```

## Update model descriptions with Markdown

Use the existing Markdown documentation stored in a code repository to populate the descriptions of your IcePanel model objects and connections. This can be automatically updated as part of a build pipeline.

First fetch a list of the model objects that exist in your landscape and find the identifier to update.

```
curl https://api.icepanel.io/v1/landscapes/{landscapeId}/versions/latest/model/objects
```

Then patch the model object identifier with your Markdown description.

```
curl -X PATCH https://api.icepanel.io/v1/landscapes/{landscapeId}/versions/latest/model/objects/{modelObjectId} \
  -H 'X-API-Key {apiKey}' \
  -d '{"description": "# Heading\nbody"}'
```

## Create model objects

Create objects in your model, great for automatically filling out your model from another source.

First use a `GET` request to find the root model object, your landscape may have multiple root model objects if you use domains.

```
curl -g 'https://api.icepanel.io/v1/landscapes/{landscapeId}/versions/latest/model/objects?filter[type]=root' \
  -H 'Content-Type: application/json' \
  -H 'X-API-Key {apiKey}'
```

Once you've found the root model object pass the id to the `parentId` property of `POST` request to create a model objects inside it.

```
curl -X POST https://api.icepanel.io/v1/landscapes/{landscapeId}/versions/latest/model/objects \
  -H 'Content-Type: application/json' \
  -H 'X-API-Key {apiKey}' \
  -d '{"name": "New system", "type": "system", "parentId": "{parentId}"}'
```

## Create a version of your landscape

Version your landscape and create a snapshot in time on your version timeline. This can be run automatically as part of a build or release pipeline.

```
curl -X POST https://api.icepanel.io/v1/landscapes/{landscapeId}/versions \
  -H 'Content-Type: application/json' \
  -H 'X-API-Key {apiKey}' \
  -d '{"name": "1.0", "notes": "Version 1.0", "modelHandleId": null}'
```
